{
"title": "【bootstrap】tooltip在触发元素remove后的小bug",
"index": "1",
"date" : "2016-01-15",
"tag"  : "bootstrap，tooltip",
"content": [
"<strong>【Preface】</strong>",
"<p>现在页面中有个div，这个div右上角（或者其他位置）有个 × 的图标（这个图标添加tooltip工具提示），光标移到这个图标时，触发tooltip，提示“点击移除”这样类似的字样，然后点击后，把这个div作remove()这样的删除操作。</p>",
"<p>然后，问题来了，因为这个div被remove()了，导致生成的tooltip对应的 × 图标也被remove()，因为找不到，所以对应的mouseout（可能是mouseleave事件，参考了一下bootstrap的源码，没找出头绪，猜测是这两个的其中一个）事件就没法触发，导致tooltip工具提示一直在那里，出bug了。</p>",
"<br><strong>【Main Body】</strong>",
"<p>文字不多讲，先附代码（bootstrap、jquery的引入就不写了，节省篇幅）：</p>",
"<div class=\"code-container\"><code>",
"<xmp><div style=\"width:70%;margin:50px auto;height:300px;\"></xmp>",
"<xmp class=\"indent-1\"><a id=\"test01\" href=\"javascript:;\" data-toggle=\"tooltip\" title=\"反馈错误\" data-placement=\"top\" data-container=\"body\"></xmp>",
"<xmp class=\"indent-2\"><i class=\"fa fa-bug\"></i></xmp>",
"<xmp class=\"indent-1\"></a></xmp>",
"<xmp class=\"indent-1\"><a id=\"test\" href=\"javascript:;\" data-toggle=\"tooltip\" title=\"点击移除\" data-placement=\"top\" data-container=\"body\"></xmp>",
"<xmp class=\"indent-2\"><i class=\"fa fa-times\"></i></xmp>",
"<xmp class=\"indent-1\"></a></xmp>",
"<xmp></div></xmp>",
"<xmp><script></xmp>",
"<xmp class=\"indent-1\">$('[data-toggle=\"tooltip\"]').tooltip();</xmp>",
"<xmp class=\"indent-1\">$('#test').on('click', function() {</xmp>",
"<xmp class=\"indent-2\">var $this = $(this);</xmp>",
"<xmp class=\"indent-2\">$this.remove();</xmp>",
"<xmp class=\"indent-2\">$('.tooltip.fade.top.in').remove();//这行代码是我个人用来解决这个问题而添加的</xmp>",
"<xmp class=\"indent-1\">})</xmp>",
"<xmp></script></xmp>",
"</code></div>",
"<p>再放一张图（这里以火狐下为例，测试过再各个主流浏览器下都一样，就不多放图了），来看一下为什么我会使用这个方法的。</p>",
"<div class=\"code-container\"><code>",
"<xmp>$('.tooltip.fade.top.in').remove();</xmp>",
"</code></div>",
"<div class=\"img-container size-md\"><img src=\"res/papers/img/001-01.jpg\"></div>",
"<p>光标移开后，再聚焦到对应的×图标上，对比一下id，发现id变了。</p>",
"<p>这里，顺便说一下，原本我是打算去看bootstrap的源码，看看他在tooltip这块的源码怎么写的，好从根源上解决问题。后来看了一部分后，放弃了，对我现在的半吊子水平来说，压力有点大。</p>",
"<p>但是至少从这个来说，生成的tooltip，id是随机的，而且tooltip的隐藏，并不是\"display:none\"的隐藏，应该是类似\"remove()\"的隐藏。</p>",
"<p>然后，使用了我的那个方法后，测试后之后（图片太费劲又浪费网络，就不放了），把 × 图标移除后，没有出现对应的tooltip图标不消失的bug，鼠标再次划过bug图标，也可以正常显示tooltip工具提示，至少现阶段看来没问题。</p>",
"<br><p class=\"sub-chapter\">-- 2016-01-16更新 --</p>",
"<p>接收到一些大神的指导，解决方法如下：</p>",
"<p>在remove之前，先将tooltip销毁</p>",
"<div class=\"code-container\"><code>",
"<xmp>$('#test').tooltip('destroy').remove();</xmp>",
"</code></div>",
"<p>结合我自己的方法，再补充一下destroy实例，应该是没有问题了。</p>"
]
}