{
"title": "【json】读取本地json时，无法读取到的bug时，自己踩的一些坑",
"index": "2",
"date" : "2016-02-10",
"tag"  : "json",
"content": [
"<strong>【Preface】</strong>",
"<p>最近做一个小东西，然后中间有一部要读取本地的json文件，就需要自定义一个json文件用作测试，然后就碰到了一个小坑，发现读取失败（也就是读取成功后的回调函数没有执行）。另外，读取json文件用的是jquery提供的getJSON()方法。</p>",
"<p>另外有一个问题要提前说一下，本地读取json文件，chrome会读取失败（可能是我有些参数没设对，反正后来也没有去折腾），所以下面的测试，建议在FireFox下进行。</p>",
"<br><strong>【Main Body】</strong>",
"<p>这么说可能还有点不是特别直观，贴一下代码再附上描述吧（用的jquery封装好的方法，没办法，真的省了很多造轮子的时间）：</p>",
"<div class=\"code-container\"><code>",
"<xmp><script></xmp>",
"<xmp class=\"indent-1\">$.getJSON(path, function(data) {</xmp>",
"<xmp class=\"indent-2\">console.info(data)</xmp>",
"<xmp class=\"indent-2\">console.info('get json success!')</xmp>",
"<xmp class=\"indent-1\">}</xmp>",
"<xmp class=\"indent-1\">console.info('another step!')</xmp>",
"<xmp></script></xmp>",
"</code></div>",
"<p>然后，打开控制台，发现结果只打印了another step!这个字符串，也就是说，没有进到getJSON的回调函数中去。</p>",
"<p>后来找了半天，百度了半天，发现有个百度回答好像提到了单双引的问题。</p>",
"<p>抱着试一试的心态，把所有的单引号都改成了单引号，结果正常读取到了，即对应代码中，打印了another step!和get json success!这两个字符串。（因为回调的关系，所以another step这个字符串先被打印）</p>",
"<br><strong>【Summary】</strong>",
"<p>之前了解到的，json数据格式和js、html以及xml这样的标记语言语法类似，所以先入为主，但是json本地文件好像有有一些不同，用单引果然会出问题。</p>",
"<p>下一次如果发现本地json文件读取失败了，可以看看是不是因为用了单引号。</p>",
"<br><p class=\"sub-chapter\">-- 2016-08-05更新 --</p>",
"<p>最近写的时候有碰到坑了，好像还是自己挖的。</p>",
"<p>在json文件里面使用注释：//和/**/这两种，好像又无法读取了，后来把这些注释全部去掉后，又正常能读取了。</p>",
"<p>后来百度了一下，查到一点别人给的回答：</p>",
"<div class=\"refer-content\"><p>按照json.org上的说法，本身的JSON语法上就不包含注释</p>",
"<p>虽然可以按照JS的方式去注释处理了，不过可能不保证所有的JSON解析包都支持了。比如这两个就会报错:</p>",
"<p>http://www.oschina.net/p/json.simple</p>",
"<p>http://www.oschina.net/p/svenson</p>",
"<p>另外页面前端对JSON的处理,也不是简单的eval就够了,可以参考下jQuery对JSON的解析处理</p></div>",
"<p>以上，就是全部了。</p>"
]
}